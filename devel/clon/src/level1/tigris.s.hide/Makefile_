######################################################################
#
# makefile for the 'tigris' directory: Tigris_PPC, TigrisLite_PPC etc
#
######################################################################

CC = cc

HVPATH = ../../../Hv
HVINC  = $(HVPATH)/sold
HVLIB  = $(HVPATH)/sold
vme_stuff = ../libvme_download.a 

MOTIFLIBPATH = /usr/dt/lib
XLIBPATH   = /usr/openwin/lib
XLIBS = -L$(HVLIB) -lHvold -L$(MOTIFLIBPATH) -lXm -L$(XLIBPATH) \
		-lXt -lX11 -lnsl -lsocket
LIBS = $(vme_stuff) $(XLIBS) -lm -lc

SRCS = main.c init.c setup.c feedback.c ced_geometry.c scintillator.c \
		textitem.c evbutton.c sectorhex.c sectbuttons.c scintbuts.c \
		cradle.c menus.c setupview.c
OBJS = ${SRCS:.c=.o}

CFLAGS = -g $(PLATFORMFLAGS) -c
LDFLAGS = -g

INCLUDEDIR = /usr/include/X11
HV_XINCLUDEDIR = /usr/openwin/include
HV_XLIBDIR = /usr/openwin/lib
HV_XMLIBDIR = /usr/dt/lib
HVINCLUDEDIR = $(HVINC)
INCLUDES =   -I../ -I$(INCLUDEDIR) -I$(HVINCLUDEDIR) -I$(HV_XINCLUDEDIR)

#####################################################

all: Tigris_PPC Tigris_OLD TigrisLite_PPC TigrisLite_OLD

Tigris_PPC: $(OBJS) fileio.o
	$(CC) -o $@ fileio.o $(LDFLAGS) $(OBJS) $(LIBS)

Tigris_OLD: $(OBJS) fileio_old.o
	$(CC) -o $@ fileio_old.o $(LDFLAGS) $(OBJS) $(LIBS)

TigrisLite_PPC: $(OBJS) tigrisLite.c fileio.o
	${CC} -o TigrisLite_PPC tigrisLite.c -I../ -I$(HVINC) fileio.o \
				$(LIBS) -lnsl -lsocket

TigrisLite_OLD: $(OBJS) tigrisLite.c fileio_old.o
	${CC} -o TigrisLite_OLD -DOLDLOAD tigrisLite.c -I../ \
				-I$(HVINC) fileio_old.o $(LIBS) -lnsl -lsocket

fileio_old.o: fileio.c
	$(CC) $(INCLUDES) $(CFLAGS) -DOLDLOAD -o fileio_old.o fileio.c

.c.o :
	$(CC) $(INCLUDES) $(CFLAGS) $<

.PHONY : clean

clean: distclean
distclean:
	rm -f $(OBJS) fileio.o fileio_old.o tigrisLite.o
	rm -f TigrisLite_PPC Tigris_PPC TigrisLite_OLD Tigris_OLD

install: exports
exports:
	cp TigrisLite_PPC $(CLON_BIN)
	cp Tigris_PPC $(CLON_BIN)
	cp TigrisLite_OLD $(CLON_BIN)
	cp Tigris_OLD $(CLON_BIN)
	cp ascii.geo $(CLON_PARMS)/trigger






