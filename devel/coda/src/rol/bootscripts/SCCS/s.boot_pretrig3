h04007
s 00047/00009/00054
d D 1.9 11/11/30 22:52:46 boiarino 9 8
c *** empty log message ***
e
s 00000/00000/00063
d D 1.8 11/11/23 17:02:20 sergpozd 8 7
c *** empty log message ***
e
s 00017/00005/00046
d D 1.7 11/11/23 13:55:30 sergpozd 7 6
c add dsc2.o
c 
e
s 00004/00005/00047
d D 1.6 09/10/11 01:44:06 boiarino 6 5
c *** empty log message ***
e
s 00001/00001/00051
d D 1.5 09/10/10 15:58:05 boiarino 5 4
c *** empty log message ***
e
s 00005/00000/00047
d D 1.4 09/10/04 20:08:28 boiarino 4 3
c *** empty log message ***
e
s 00002/00000/00045
d D 1.3 08/11/21 13:51:52 boiarino 3 2
c *** empty log message ***
e
s 00020/00005/00025
d D 1.2 07/05/08 09:30:23 sergpozd 2 1
c added load of v895 library
c 
e
s 00030/00000/00000
d D 1.1 07/03/15 11:11:30 boiarino 1 0
c date and time created 07/03/15 11:11:30 by boiarino
e
u
U
f e 0
t
T
I 1
#
D 2
# Bootscript for pretrig3
E 2
I 2
#  Bootscript for pretrig3
E 2
#

D 2
# adds router 
E 2
I 2

# adds router
E 2
cd "$CODA/VXWORKS_ppc/bootscripts"
< routeadd_mot.boot
I 3
routeNetAdd "129.57.167.0","129.57.69.1"
E 3

D 2
#  initializations for all rocs
E 2
I 2
# initializations for all rocs
E 2
cd "$CODA/VXWORKS_ppc/bootscripts"
< all.boot

D 2
#
E 2
I 2

# standard CLAS libraries
E 2
cd "$CODA/VXWORKS_ppc/obj"
ld < all_rocs.o

#set env variables
cd "$CODA/VXWORKS_ppc/bootscripts"
< vxbootenv.boot

I 9
# load CLAS translation library
cd "$CODA/VXWORKS_ppc/lib"
ld < libcodatt.so
E 9
I 2

I 9
# load coda_roc
cd "$CODA/VXWORKS_ppc/bin"
ld < coda_roc
ld < tcpServer.o
ld < blaster.o
ld < blastee.o
E 9

I 9
# load rol library
cd "$CODA/VXWORKS_ppc/lib"
ld < librol.so

E 9
###############################
# v895 - CAEN VME Discriminator
###############################
D 9
cd "$CODA/VXWORKS_ppc/obj"
ld < v895.o
E 9
I 7
v895Init()
#v895SetConfig("$CLON_PARMS/pretrigger/conf/pretrig3.conf")
# end of v895
##############
E 7

I 6
D 7
# N470 caenet driver for BONUS
ld < N470drive.o
E 7

I 7
##################################################
# dsc2 - TJNAF VME 16 Channel Discriminator/Scaler
##################################################
D 9
cd "$CODA/VXWORKS_ppc/obj"
ld < dsc2.o
E 7

E 9
E 6
D 7
v895Init()
I 3
v895SetConfig("$CLON_PARMS/pretrigger/conf/pretrig3.conf")
E 7
I 7
dsc2Init(0x10d10000,0x10000,28)
E 7
E 3

D 7
# end of v895
E 7
I 7
# end of dsc2
E 7
##############

I 4
D 6
###############################
# N470 caenet driver for BONUS
D 5
ld < /usr/clas/devel/clon/src/dchv/s/N470drive_ppc.o
E 5
I 5
ld < /usr/local/clas/devel/coda/VXWORKS_ppc/obj/N470drive.o
E 5
###############################
E 6
E 4

I 7


# N470 caenet driver for BONUS
#ld < N470drive.o


E 7
I 4
D 6

E 6
E 4
E 2
D 9
# loading 'coda_roc' just to resolve references
cd "$CODA/VXWORKS_ppc/bin"
ld < coda_roc
ld < tcpServer.o
E 9

taskSpawn "TCP_SERVER",250,0,100000,tcpServer

shellPromptSet("pretrig3> ")

I 9

#########################
#### v1495 ##############

#v1495ScalersReadoutAdd(0x08524000,106,0x08520006)
#v1495ScalersReadoutAdd(0x08534000,106,0x08530006)
#v1495ScalersReadoutAdd(0x08544000,106,0x08540006)
#v1495ScalersReadoutAdd(0x08554000,106,0x08550006)
#v1495ScalersReadoutAdd(0x08520100,14,0x08520006)
#v1495ScalersReadoutAdd(0x08530100,14,0x08530006)
#v1495ScalersReadoutAdd(0x08540100,14,0x08540006)
#v1495ScalersReadoutAdd(0x08550100,14,0x08550006)
#v1495ScalersReadoutStart()
#v1495SetScalersReadInterval(1)

###set the number of hits in cluster to 3
#utsetmemory(0x39,0x510030,2,3)
#utsetmemory(0x39,0x520030,2,3)
#utsetmemory(0x39,0x530030,2,3)
#utsetmemory(0x39,0x540030,2,3)
#utsetmemory(0x39,0x550030,2,3)
#taskDelay(sysClkRateGet()*1)

###reset logic
#utsetmemory(0x39,0x510010,2,1)
###must be at least 100ns in between here
#taskDelay(sysClkRateGet()*1)
#utsetmemory(0x39,0x510010,2,0)

#v1495's server
#taskSpawn "V1495SRV",250,0,100000,v1495tcpServer1

#v851Init(0xfbffd000,0)
#v851ProgPulser(1000,0)
E 9
D 2
#
E 2
E 1
