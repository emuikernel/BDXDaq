#
#  Bootscript for dccntrl (DC HV control on SF)
#

# adds router 
cd "$CODA/VXWORKS_ppc/bootscripts"
< routeadd_mot.boot

#  initializations for all rocs
cd "$CODA/VXWORKS_ppc/bootscripts"
< all.boot

#  standard CLAS libraries
cd "$CODA/VXWORKS_ppc/obj"
ld < all_rocs.o
###ld < utload.o

#set env variables
cd "$CODA/VXWORKS_ppc/bootscripts"
< vxbootenv.boot




###old stuff
##cd "$CODA/VXWORKS_ppc/obj"
##ld < v288com_ppc.o
##ld < switch_ppc.o
##sysClkRateSet(100)



####moved from boot_l2cntrl, check needed
#### load and init level2 control
cd "$CODA/VXWORKS_ppc/obj"
ld < level2_ppc.o
ld < sis3801.o
l2_init()
l2_flex_init()
taskSpawn "L2_RESET",248,0,100000,l2_status_dead_reset




###CAMAC stuff
### Load libraries
##cd "$CODA/VXWORKS_ppc/lib"
##ld < libcamac.so
##cd "$CODA/VXWORKS_ppc/bin"
##ld < caRpc_svc
##ld < bcnaf
### init one camac branch
##ccinit(0)
#### spawn the CAMAC remote server
##taskSpawn "caServ",110,spTaskOptions,20000,caSrvr_main




# loading 'coda_roc' just to resolve references
cd "$CODA/VXWORKS_ppc/bin"
ld < coda_roc
ld < tcpServer.o

taskSpawn "TCP_SERVER",250,0,100000,tcpServer


cd "$CLON_PARMS/dchv/vme/"

shellPromptSet("dccntrl> ");

# set OR board mask for TPC busy
###utsetmemory(0x39,0xee0000,4,0xffffffff)

